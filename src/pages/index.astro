---
import Layout from '../layouts/Layout.astro';
import ArticleCard from '../components/ArticleCard.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const welcomePost = allPosts.find(p => p.slug === 'welcome');
const otherPosts = allPosts
	.filter(post => {
		const today = new Date();
		today.setHours(23, 59, 59, 999);
		// Exclude library posts and welcome post
		return post.slug !== 'welcome' && !post.id.startsWith('library/') && post.data.pubDate <= today;
	})
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const posts = welcomePost ? [welcomePost, ...otherPosts] : otherPosts;
---

<Layout title="Home">
	<section class="mb-12 text-center py-12 bg-gradient-to-b from-darker to-transparent rounded-2xl border border-gray-800">
		<h1 class="text-4xl md:text-6xl font-extrabold mb-4">
			<span class="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">Smart AI</span> & Finance
		</h1>
		<p class="text-xl text-gray-400 max-w-2xl mx-auto">
			Unlock the power of Artificial Intelligence to revolutionize your financial productivity using tools like ChatGPT and Gemini.
		</p>
	</section>



	<section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
		{posts.map((post) => (
			<ArticleCard post={post} />
		))}
	</section>
    
    {posts.length === 0 && (
        <div class="text-center py-20">
            <p class="text-gray-500">No articles found. Coming soon!</p>
        </div>
    )}


</Layout>
