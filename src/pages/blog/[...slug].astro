---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';


export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: { post },
	}));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
	<div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-12">
		<article class="lg:col-span-2">
			<div class="mb-8 text-center">
				<div class="text-primary font-medium mb-2">{post.data.pubDate.toLocaleDateString('en-US', { dateStyle: 'long' })}</div>
				<h1 class="text-3xl md:text-5xl font-bold mb-6 leading-tight">{post.data.title}</h1>
				<div class="flex items-center justify-center gap-2">
					<img src="/images/logo.png" class="w-8 h-8 rounded-full bg-white p-1" alt="Author" />
					<span class="text-gray-400">By {post.data.author}</span>
				</div>
			</div>

			{post.data.image && (
				<div class="rounded-2xl overflow-hidden mb-12 border border-gray-800 shadow-2xl">
					<img src={post.data.image} alt={post.data.title} class="w-full object-cover max-h-[500px]" />
				</div>
			)}

			<!-- Typography Styles for Markdown Content -->
			<div class="prose prose-lg prose-invert mx-auto prose-headings:text-white prose-a:text-primary prose-a:no-underline hover:prose-a:underline prose-strong:text-secondary">
				<Content />
			</div>
		</article>

		<aside class="hidden lg:block lg:col-span-1">
			<div class="sticky top-24 space-y-8">
				<!-- Promo Card -->
				<div class="bg-gradient-to-br from-surface to-darker border border-gray-800 rounded-2xl p-6 shadow-xl relative overflow-hidden group">
					<div class="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-primary/20 rounded-full blur-2xl group-hover:bg-primary/30 transition-all duration-500"></div>
					<div class="absolute bottom-0 left-0 -mb-4 -ml-4 w-24 h-24 bg-secondary/20 rounded-full blur-2xl group-hover:bg-secondary/30 transition-all duration-500"></div>
					
					<div class="relative z-10">
						<h3 class="text-xl font-bold mb-3 text-white">Master AI with our Exclusive Micro-Guide</h3>
						<p class="text-gray-400 text-sm mb-6">Unlock the full potential of Artificial Intelligence. Get step-by-step strategies to automate your work and boost productivity.</p>
						
						<a href="https://hotm.io/7OII6J" target="_blank" class="block w-full text-center px-6 py-3 bg-gradient-to-r from-primary to-secondary hover:brightness-110 text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-primary/50 transform hover:-translate-y-0.5">
							Get the AI Guide
						</a>
						
						<div class="mt-4 flex items-center justify-center gap-2 text-xs text-gray-500">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
							</svg>
							Secure & Instant Access
						</div>
					</div>
				</div>

				<!-- Placeholder for future widgets like Popular Posts or Newsletter -->
			</div>
		</aside>
	</div>
</Layout>
